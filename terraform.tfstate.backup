{
    "version": 3,
    "terraform_version": "0.11.7",
    "serial": 105,
    "lineage": "f2d328b7-9981-e69c-b739-3ab5917bb130",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {
                "configuration": {
                    "sensitive": false,
                    "type": "string",
                    "value": "\nsubnet: subnet-c3526c8a\n\n"
                }
            },
            "resources": {
                "aws_default_security_group.chef_sample": {
                    "type": "aws_default_security_group",
                    "depends_on": [
                        "aws_vpc.chef_sample"
                    ],
                    "primary": {
                        "id": "sg-7dd77e05",
                        "attributes": {
                            "arn": "arn:aws:ec2:ap-northeast-1:772414330900:security-group/sg-7dd77e05",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.description": "",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.ipv6_cidr_blocks.#": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-7dd77e05",
                            "ingress.#": "3",
                            "ingress.2214680975.cidr_blocks.#": "1",
                            "ingress.2214680975.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2214680975.description": "",
                            "ingress.2214680975.from_port": "80",
                            "ingress.2214680975.ipv6_cidr_blocks.#": "0",
                            "ingress.2214680975.protocol": "tcp",
                            "ingress.2214680975.security_groups.#": "0",
                            "ingress.2214680975.self": "false",
                            "ingress.2214680975.to_port": "80",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.description": "",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.ipv6_cidr_blocks.#": "0",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "ingress.482069346.cidr_blocks.#": "1",
                            "ingress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.482069346.description": "",
                            "ingress.482069346.from_port": "0",
                            "ingress.482069346.ipv6_cidr_blocks.#": "0",
                            "ingress.482069346.protocol": "-1",
                            "ingress.482069346.security_groups.#": "0",
                            "ingress.482069346.self": "false",
                            "ingress.482069346.to_port": "0",
                            "name": "default",
                            "owner_id": "772414330900",
                            "revoke_rules_on_delete": "false",
                            "tags.%": "1",
                            "tags.Name": "chef_sample_01",
                            "vpc_id": "vpc-63385004"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_instance.chef-node": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_default_security_group.chef_sample",
                        "aws_subnet.chef_sample_subnet",
                        "data.template_cloudinit_config.cloud_config"
                    ],
                    "primary": {
                        "id": "i-04da693bf98aaf414",
                        "attributes": {
                            "ami": "ami-92df37ed",
                            "associate_public_ip_address": "true",
                            "availability_zone": "ap-northeast-1a",
                            "credit_specification.#": "1",
                            "credit_specification.0.cpu_credits": "standard",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "get_password_data": "false",
                            "iam_instance_profile": "",
                            "id": "i-04da693bf98aaf414",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "ipv6_addresses.#": "0",
                            "key_name": "chef_sample",
                            "monitoring": "false",
                            "network_interface.#": "0",
                            "network_interface_id": "eni-edf208dc",
                            "password_data": "",
                            "placement_group": "",
                            "primary_network_interface_id": "eni-edf208dc",
                            "private_dns": "ip-10-10-10-11.ap-northeast-1.compute.internal",
                            "private_ip": "10.10.10.11",
                            "public_dns": "ec2-18-179-4-185.ap-northeast-1.compute.amazonaws.com",
                            "public_ip": "18.179.4.185",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "100",
                            "root_block_device.0.volume_id": "vol-07ae57538bcea36a5",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "gp2",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-c3526c8a",
                            "tags.%": "2",
                            "tags.HostName": "node1.user01.com",
                            "tags.Name": "chef_node_user01_1",
                            "tenancy": "default",
                            "user_data": "e768a1aa2739c7a7a4674249b201e235f15fcd5e",
                            "volume_tags.%": "0",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.2520965032": "sg-7dd77e05"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 1200000000000,
                                "update": 600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_instance.chef-server": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_default_security_group.chef_sample",
                        "aws_subnet.chef_sample_subnet",
                        "data.template_cloudinit_config.cloud_config"
                    ],
                    "primary": {
                        "id": "i-0bb4aa42123c84d51",
                        "attributes": {
                            "ami": "ami-92df37ed",
                            "associate_public_ip_address": "true",
                            "availability_zone": "ap-northeast-1a",
                            "credit_specification.#": "1",
                            "credit_specification.0.cpu_credits": "standard",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "get_password_data": "false",
                            "iam_instance_profile": "",
                            "id": "i-0bb4aa42123c84d51",
                            "instance_state": "running",
                            "instance_type": "t2.medium",
                            "ipv6_addresses.#": "0",
                            "key_name": "chef_sample",
                            "monitoring": "false",
                            "network_interface.#": "0",
                            "network_interface_id": "eni-91f50fa0",
                            "password_data": "",
                            "placement_group": "",
                            "primary_network_interface_id": "eni-91f50fa0",
                            "private_dns": "ip-10-10-10-21.ap-northeast-1.compute.internal",
                            "private_ip": "10.10.10.21",
                            "public_dns": "ec2-13-230-96-142.ap-northeast-1.compute.amazonaws.com",
                            "public_ip": "13.230.96.142",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "100",
                            "root_block_device.0.volume_id": "vol-07f1b814315996710",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "gp2",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-c3526c8a",
                            "tags.%": "2",
                            "tags.HostName": "chef-server.user01.com",
                            "tags.Name": "chef_server.user01",
                            "tenancy": "default",
                            "user_data": "e768a1aa2739c7a7a4674249b201e235f15fcd5e",
                            "volume_tags.%": "0",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.2520965032": "sg-7dd77e05"
                        },
                        "meta": {
                            "e2bfb730-ecaa-11e6-8f88-34363bc7c4c0": {
                                "create": 600000000000,
                                "delete": 1200000000000,
                                "update": 600000000000
                            },
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_internet_gateway.chef_sample_public": {
                    "type": "aws_internet_gateway",
                    "depends_on": [
                        "aws_vpc.chef_sample"
                    ],
                    "primary": {
                        "id": "igw-590d413d",
                        "attributes": {
                            "id": "igw-590d413d",
                            "tags.%": "1",
                            "tags.Name": "chef_sample_01",
                            "vpc_id": "vpc-63385004"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table.chef_sample_public": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_internet_gateway.chef_sample_public",
                        "aws_vpc.chef_sample"
                    ],
                    "primary": {
                        "id": "rtb-9536cef3",
                        "attributes": {
                            "id": "rtb-9536cef3",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.3980783825.cidr_block": "0.0.0.0/0",
                            "route.3980783825.egress_only_gateway_id": "",
                            "route.3980783825.gateway_id": "igw-590d413d",
                            "route.3980783825.instance_id": "",
                            "route.3980783825.ipv6_cidr_block": "",
                            "route.3980783825.nat_gateway_id": "",
                            "route.3980783825.network_interface_id": "",
                            "route.3980783825.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "chef_sample_01",
                            "vpc_id": "vpc-63385004"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_route_table_association.chef_sample_association": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.chef_sample_public",
                        "aws_subnet.chef_sample_subnet"
                    ],
                    "primary": {
                        "id": "rtbassoc-89e116f0",
                        "attributes": {
                            "id": "rtbassoc-89e116f0",
                            "route_table_id": "rtb-9536cef3",
                            "subnet_id": "subnet-c3526c8a"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_subnet.chef_sample_subnet": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.chef_sample"
                    ],
                    "primary": {
                        "id": "subnet-c3526c8a",
                        "attributes": {
                            "assign_ipv6_address_on_creation": "false",
                            "availability_zone": "ap-northeast-1a",
                            "cidr_block": "10.10.10.0/24",
                            "id": "subnet-c3526c8a",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "1",
                            "tags.Name": "chef_sample_subnet.user01",
                            "vpc_id": "vpc-63385004"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "aws_vpc.chef_sample": {
                    "type": "aws_vpc",
                    "depends_on": [],
                    "primary": {
                        "id": "vpc-63385004",
                        "attributes": {
                            "assign_generated_ipv6_cidr_block": "false",
                            "cidr_block": "10.10.0.0/16",
                            "default_network_acl_id": "acl-0bb0a26c",
                            "default_route_table_id": "rtb-1928d07f",
                            "default_security_group_id": "sg-7dd77e05",
                            "dhcp_options_id": "dopt-b630fede",
                            "enable_classiclink": "false",
                            "enable_classiclink_dns_support": "false",
                            "enable_dns_hostnames": "true",
                            "enable_dns_support": "true",
                            "id": "vpc-63385004",
                            "instance_tenancy": "default",
                            "main_route_table_id": "rtb-1928d07f",
                            "tags.%": "1",
                            "tags.Name": "chef_sample_01"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.aws"
                },
                "data.template_cloudinit_config.cloud_config": {
                    "type": "template_cloudinit_config",
                    "depends_on": [
                        "data.template_file.cloud_init",
                        "data.template_file.cloud_init_shell"
                    ],
                    "primary": {
                        "id": "3303433102",
                        "attributes": {
                            "base64_encode": "true",
                            "gzip": "true",
                            "id": "3303433102",
                            "part.#": "2",
                            "part.0.content": "#cloud-config\n\n# Install additional packages on first boot\n#\n# Default: none\n#\n# if packages are specified, this apt_update will be set to true\n#\n# packages may be supplied as a single package name or as a list\n# with the format [\u003cpackage\u003e, \u003cversion\u003e] wherein the specifc\n# package version will be installed.\n\npackages:\n - tree\n - emacs\n\nwrite_files:\n - content: |\n     127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n     ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n     10.10.10.11 node1.user01.com node1\n     10.10.10.21 chef-server.user01.com chef-server\n   path: /etc/hosts\n   permissions: '0644'\n\npower_state:\n delay: \"now\"\n mode: reboot\n message: \"reboot by cloud-init\"\n timeout: 5\n condition: True",
                            "part.0.content_type": "text/cloud-config",
                            "part.0.filename": "",
                            "part.0.merge_type": "",
                            "part.1.content": "#!/bin/bash\n\nLOCAL_IP=`curl -s http://169.254.169.254/latest/meta-data/local-ipv4`\nTEMPLATE=$(cat \u003c\u003cEOF\nNETWORKING=yes\nNOZEROCONF=yes\nHOSTNAME=\nEOF\n)\n\nif [ $LOCAL_IP = \"10.10.10.11\" ]; then\n  echo \"${TEMPLATE}node1.user01.com\" \u003e /etc/sysconfig/network\nelif [ $LOCAL_IP = \"10.10.10.21\" ]; then\n  echo \"${TEMPLATE}chef-server.user01.com\" \u003e /etc/sysconfig/network\nfi\n\nchown root:root /etc/sysconfig/network\nchmod 644 /etc/sysconfig/network\nexit 0\n",
                            "part.1.content_type": "text/x-shellscript",
                            "part.1.filename": "shell_hostname",
                            "part.1.merge_type": "",
                            "rendered": "H4sIAAAAAAAA/5xUcW/bthP9n4C/w/3kAP0NqCQrcF1MiQNkibsFi+0i8zZsReHS1Mk6lCIF8hTH2PbdB0l2IrRLMIwwzOPx8d6J945X1jAaDlf7ClMoa81UScdxSQ+YncHG1iaTbj8N5jfz2XfLnxfXl3e/BaJZhb+g82RNCkk0GoiBCMM+aCAeYztpfI4unBllMzLbFN5uiHuAlpzxgWOlbZ2FypqctgMxpxK/ohn2MUIM4cZ4llqDzDJiskZqqKT6LLfowRrIyXmGjbUshmII15jLWnMKxhpsPZQ/4aVD8BUqygmz18AFeZAVr+sqk4ywI61hg+CRgS2wq7sQj+dLuW/366rShBlIDxI8ma3GIwiMLBGs6/Y0eRZD2BEXwAVCbl0pGT6cH9AXr+H8vruBi4+wK9AhmRbZpame2OGAe8ySuovBLBLimGEqIAR2iM2MpVReiJ0jxnVO+rCturqk8KeAZiSnb6NRNIoSANBWSV1Yz09W1FqZLSWZJ++4Z/YR4y5mmiZwHP865qRn9hGTQ56j6PBLwNgMk6j26EZJpGzZOb7AnSagCsxDj+4eXR/dczdnKslFCjGyihty3/rQleSbC/cpvBpNxuNXQlR2h27tWTKmAjLUcp9CYOwuEFDaDFNw2EoRSvRebjGFoPPAZg+dsskQBwKYSrQ1p/BGNBXptJ3CytX4fK9dk6+sP0Als1RFiYbPoKluI7xp4AvUet18RrMO/lufPoRtGK8cVfxco/4v3pCJN9IXQtwury5v1zfvp59U7TSEHgrmKo3jZPJtdPpmHB3mWEtGz3GJLMNMsozbOodU3Y8/idVs/v72cjWbnvxfSYbz89nynVjMVr8u7368WXw/3aMXi+Xvs7vl1XLxrl3+sPxptbicz6aiwX4jBOXwAU6O+cAUgp5uAvh41nSXEQCoCgvByR9H0r++1FQAF50m/N53z1FskHfWfRaoX6A5fZnmnyX5AllOQqjC7gw4azlt/p6DqqK0GUzG42cTfyCG0VeveRgOxN8BAAD//8YrJu4sBgAA"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "data.template_file.cloud_init": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "520113e73ac5c9e85caef7808c432dabc191becf976894f85e88f3c95714f027",
                        "attributes": {
                            "id": "520113e73ac5c9e85caef7808c432dabc191becf976894f85e88f3c95714f027",
                            "rendered": "#cloud-config\n\n# Install additional packages on first boot\n#\n# Default: none\n#\n# if packages are specified, this apt_update will be set to true\n#\n# packages may be supplied as a single package name or as a list\n# with the format [\u003cpackage\u003e, \u003cversion\u003e] wherein the specifc\n# package version will be installed.\n\npackages:\n - tree\n - emacs\n\nwrite_files:\n - content: |\n     127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n     ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n     10.10.10.11 node1.user01.com node1\n     10.10.10.21 chef-server.user01.com chef-server\n   path: /etc/hosts\n   permissions: '0644'\n\npower_state:\n delay: \"now\"\n mode: reboot\n message: \"reboot by cloud-init\"\n timeout: 5\n condition: True",
                            "template": "#cloud-config\n\n# Install additional packages on first boot\n#\n# Default: none\n#\n# if packages are specified, this apt_update will be set to true\n#\n# packages may be supplied as a single package name or as a list\n# with the format [\u003cpackage\u003e, \u003cversion\u003e] wherein the specifc\n# package version will be installed.\n\npackages:\n - tree\n - emacs\n\nwrite_files:\n - content: |\n     127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n     ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n     10.10.10.11 node1.user01.com node1\n     10.10.10.21 chef-server.user01.com chef-server\n   path: /etc/hosts\n   permissions: '0644'\n\npower_state:\n delay: \"now\"\n mode: reboot\n message: \"reboot by cloud-init\"\n timeout: 5\n condition: True"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                },
                "data.template_file.cloud_init_shell": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "57f44b57eb6c3d4770d356da12a6269deda9e475b79f15fd01ae805b89d0fb83",
                        "attributes": {
                            "id": "57f44b57eb6c3d4770d356da12a6269deda9e475b79f15fd01ae805b89d0fb83",
                            "rendered": "#!/bin/bash\n\nLOCAL_IP=`curl -s http://169.254.169.254/latest/meta-data/local-ipv4`\nTEMPLATE=$(cat \u003c\u003cEOF\nNETWORKING=yes\nNOZEROCONF=yes\nHOSTNAME=\nEOF\n)\n\nif [ $LOCAL_IP = \"10.10.10.11\" ]; then\n  echo \"${TEMPLATE}node1.user01.com\" \u003e /etc/sysconfig/network\nelif [ $LOCAL_IP = \"10.10.10.21\" ]; then\n  echo \"${TEMPLATE}chef-server.user01.com\" \u003e /etc/sysconfig/network\nfi\n\nchown root:root /etc/sysconfig/network\nchmod 644 /etc/sysconfig/network\nexit 0\n",
                            "template": "#!/bin/bash\n\nLOCAL_IP=`curl -s http://169.254.169.254/latest/meta-data/local-ipv4`\nTEMPLATE=$(cat \u003c\u003cEOF\nNETWORKING=yes\nNOZEROCONF=yes\nHOSTNAME=\nEOF\n)\n\nif [ $LOCAL_IP = \"10.10.10.11\" ]; then\n  echo \"$${TEMPLATE}node1.user01.com\" \u003e /etc/sysconfig/network\nelif [ $LOCAL_IP = \"10.10.10.21\" ]; then\n  echo \"$${TEMPLATE}chef-server.user01.com\" \u003e /etc/sysconfig/network\nfi\n\nchown root:root /etc/sysconfig/network\nchmod 644 /etc/sysconfig/network\nexit 0\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": "provider.template"
                }
            },
            "depends_on": []
        }
    ]
}
